#!nsh
#
# @name Tianji VTOL.
#
# @type Tianji VTOL
#
# @maintainer L3YZ <L3YZ@126.com>
#

sh /etc/init.d/rc.vtol_defaults

if [ $AUTOCNF == yes ]
then
  param set  MC_ACRO_P_MAX           360.0
  param set  MC_ACRO_R_MAX           360.0
  param set  MC_ACRO_Y_MAX           360.0
  param set  MC_PITCHRATE_D              0.0
  param set  MC_PITCHRATE_FF         0.003
  param set  MC_PITCHRATE_I              0.01
  param set  MC_PITCHRATE_MAX          60
  param set  MC_PITCHRATE_P               0.2
  param set  MC_PITCH_P                        3.2
  param set  MC_PITCH_TC                     0.2
  param set  MC_RATT_TH                      1.0
  param set  MC_ROLLRATE_D                0.0
  param set  MC_ROLLRATE_FF             0.001
  param set  MC_ROLLRATE_I              0.005
  param set  MC_ROLLRATE_MAX          60.0
  param set  MC_ROLLRATE_P                0.26
  param set  MC_ROLL_P                         2.4
  param set  MC_ROLL_TC                       0.2
  param set  MC_YAWRATE_D                  0.0
  param set  MC_YAWRATE_FF                 0.0
  param set  MC_YAWRATE_I                0.014
  param set  MC_YAWRATE_MAX            30.0
  param set  MC_YAWRATE_P                   0.3
  param set  MC_YAWRAUTO_MAX          25.0
  param set  MC_YAW_FF                        0.35
  param set  MC_YAW_P                            2.0

  param set MPC_ACC_HOR_MAX  10.0
  param set MPC_LAND_SPEED  0.5
  param set MPC_MANTHR_MIN  0.08
  param set MPC_MAN_P_MAX  35.0
  param set MPC_MAN_R_MAX  35.0
  param set MPC_MAN_Y_MAX  200.0
  param set MPC_THR_HOVER  0.5
  param set MPC_THR_MAX  0.9
  param set MPC_THR_MIN  0.12
  param set MPC_TILTMAX_AIR  40.0
  param set MPC_TILTMAX_LND  12.0
  param set MPC_TKO_SPEED  1.5
  param set MPC_XY_CRUISE  3.0
  param set MPC_XY_FF    0.25
  param set MPC_XY_P    0.6
  param set MPC_XY_VEL_D  0.0
  param set MPC_XY_VEL_I  0.01
  param set MPC_XY_VEL_MAX  5.0
  param set MPC_XY_VEL_P  0.08
  param set MPC_Z_FF    0.25
  param set MPC_Z_P    0.5
  param set MPC_Z_VEL_D  0.0
  param set MPC_Z_VEL_I    0.01
  param set MPC_Z_VEL_MAX  3.0
  param set MPC_Z_VEL_MAX_DN  3.0
  param set MPC_Z_VEL_MAX_UP  3.0
  param set MPC_Z_VEL_P    0.2

  param set MIS_ALTMODE  1.0
  param set MIS_DIST_1WP  900.0
  param set MIS_LTRMIN_ALT  1.2
  param set MIS_ONBOARD_EN  1.0
  param set MIS_TAKEOFF_ALT  3.0
  param set MIS_YAWMODE  1.0
  param set MIS_YAW_ERR  12.0
  param set MIS_YAW_TMT  -1.0

  param set FW_AIRSPD_MAX  30.0
  param set FW_AIRSPD_MIN  18.0
  param set FW_AIRSPD_TRIM  18.0
  param set FW_CLMBOUT_DIFF  10.0
  param set FW_FLAPERON_SCL  0.0
  param set FW_FLAPS_SCL  1.0
  param set FW_L1_DAMPING  0.75
  param set FW_L1_PERIOD  20.0
  param set FW_LND_AIRSPD_SC  1.3
  param set FW_LND_ANG  5.0
  param set FW_LND_FLALT  8.0
  param set FW_LND_FL_PMAX  15.0
  param set FW_LND_FL_PMIN  2.5
  param set FW_LND_HHDIST  15.0
  param set FW_LND_HVIRT  10.0
  param set FW_LND_TLALT  -1.0
  param set FW_LND_USETER  0.0
  param set FW_MAN_P_MAX  45.0
  param set FW_MAN_R_MAX  45.0
  param set FW_PR_FF    0.5
  param set FW_PR_I    0.01
  param set FW_PR_IMAX    0.4
  param set FW_PR_P    0.08
  param set FW_PSP_OFF    0.0
  param set FW_P_LIM_MAX  45.0
  param set FW_P_LIM_MIN  -45.0
  param set FW_P_RMAX_NEG  45.0
  param set FW_P_RMAX_POS  45.0
  param set FW_P_TC    0.4
  param set FW_RR_FF    0.5
  param set FW_RR_I    0.01
  param set FW_RR_IMAX    0.2
  param set FW_RR_P    0.1
  param set FW_RSP_OFF    0.0
  param set FW_R_LIM    45.0
  param set FW_R_RMAX    45.0
  param set FW_R_TC    0.4
  param set FW_THR_CRUISE  0.6
  param set FW_THR_IDLE    0.15
  param set FW_THR_LND_MAX  1.0
  param set FW_THR_MAX    1.0
  param set FW_THR_MIN    0.0
  param set FW_THR_SLEW_MAX  0.0
  param set FW_T_CLMB_MAX  5.0
  param set FW_T_HGT_OMEGA  3.0
  param set FW_T_HRATE_FF  0.0
  param set FW_T_HRATE_P  0.05
  param set FW_T_INTEG_GAIN  0.1
  param set FW_T_PTCH_DAMP  0.0
  param set FW_T_RLL2THR  15.0
  param set FW_T_SINK_MAX  5.0
  param set FW_T_SINK_MIN  2.0
  param set FW_T_SPDWEIGHT  1.0
  param set FW_T_SPD_OMEGA  2.0
  param set FW_T_SRATE_P  0.02
  param set FW_T_THRO_CONST  8.0
  param set FW_T_THR_DAMP  0.5
  param set FW_T_TIME_CONST  5.0
  param set FW_T_VERT_ACC  7.0
  param set FW_WR_FF    0.2
  param set FW_WR_I    0.1
  param set FW_WR_IMAX    1.0
  param set FW_WR_P    0.5
  param set FW_W_RMAX    0.0
  param set FW_YCO_METHOD  0.0
  param set FW_YCO_VMIN  1000.0
  param set FW_YR_FF    0.3
  param set FW_YR_I    0.0
  param set FW_YR_IMAX    0.2
  param set FW_YR_P    0.05
  param set FW_Y_RMAX    0.0

  param set VT_ARSP_BLEND  14.0
  param set VT_ARSP_FW_BLEND  8.0
  param set VT_ARSP_LP_GAIN  0.3
  param set VT_ARSP_TRANS  18.0
  param set VT_BTRANS_MAX_TM  100.0
  param set VT_B_TRANS_DUR  2.0
  param set VT_DWN_PITCH_MAX  5.0
  param set VT_EARSP_B_TRANS  5.0
  param set VT_ELEV_MC_LOCK  0.0
  param set VT_FWD_THRUST_SC  0.0
  param set VT_FW_MIN_ALT  0.0
  param set VT_FW_MOT_OFFID  0.0
  param set VT_FW_PERM_STAB  0.0
  param set VT_FW_PITCH_TRIM  0.0
  param set VT_F_TRANS_DUR  3.0
  param set VT_IDLE_PWM_MC  1080.0
  param set VT_MC_ARSPD_MAX  30.0
  param set VT_MC_ARSPD_MIN  10.0
  param set VT_MC_ARSPD_TRIM  10.0
  param set VT_MOT_COUNT  4.0
  param set VT_NAV_FORCE_VT  1.0
  param set VT_OPT_RECOV_EN  0.0
  param set VT_POWER_MAX  120.0
  param set VT_PROP_EFF    0.0
  param set VT_TILT_FW    1.0
  param set VT_TILT_MC    0.0
  param set VT_TILT_TRANS  0.3
  param set VT_TRANS_MIN_TM  2.0
  param set VT_TRANS_P2_DUR  0.5
  param set VT_TRANS_THR  0.9
  param set VT_TRANS_TIMEOUT  30.0
  param set VT_TYPE    2.0
  param set VT_WV_LND_EN  0.0
  param set VT_WV_LTR_EN  0.0
  param set VT_WV_YAWR_SCL  0.15

  param set NAV_ACC_RAD  2.0

  param set NAV_LOITER_RAD  150.0
  

fi

set MIXER TianjiMain
set PWM_OUT 12345678
set PWM_RATE 400

set MIXER_AUX TianjiAux
set PWM_AUX_RATE 50
set PWM_AUX_OUT 123456
set PWM_AUX_DISARMED 1500
set PWM_AUX_MIN 1000
set PWM_AUX_MAX 2000

set MAV_TYPE 22

param set VT_MOT_COUNT 4
param set VT_IDLE_PWM_MC 1080
param set VT_TYPE 2

